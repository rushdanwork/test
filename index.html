<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PayrollPro HR System</title>

  <style>
    :root {
      --primary-color: #4361ee;
      --secondary-color: #3a0ca3;
      --accent-color: #f72585;
      --light-color: #f8f9fa;
      --dark-color: #212529;
      --success-color: #4cc9f0;
      --danger-color: #e74c3c;
      --warning-color: #f8961e;
      --info-color: #4895ef;
      --edit-color: #7209b7;
      --leave-color: #3a86ff;
      --halfday-color: #ffbe0b;
      --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      background-color: #ffffff;
      color: var(--dark-color);
      line-height: 1.6;
    }

    .hidden {
      display: none !important;
    }

    .container {
      display: flex;
      min-height: 100vh;
    }

    .login-container {
      background-color: #ffffff;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .login-box {
      background-color: #2ecc71;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 40px;
      width: 400px;
      max-width: 90%;
    }

    .login-box h2 {
      text-align: center;
      margin-bottom: 20px;
      color: white;
    }

    .form-group {
      margin-bottom: 15px;
      text-align: center;
    }

    .form-group label {
      display: block;
      color: white;
      margin-bottom: 5px;
    }

    .form-group input {
      padding: 8px;
      border-radius: 4px;
      border: none;
      width: 80%;
    }

    .form-group button {
      background: #34495e;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .container .sidebar {
      width: 260px;
      background: #fff;
      border-right: 1px solid #e0e0e0;
      padding: 20px;
    }

    .sidebar h2 {
      font-size: 20px;
      margin-bottom: 15px;
      color: #222;
    }

    .sidebar-menu .menu-item {
      display: block;
      color: #333;
      text-decoration: none;
      padding: 8px 10px;
      border-radius: 4px;
      margin-bottom: 6px;
      transition: background 0.3s;
    }

    .sidebar-menu .menu-item:hover,
    .sidebar-menu .menu-item.active {
      background: var(--primary-color);
      color: #fff;
    }

    .main-content {
      flex: 1;
      background: #f6f8fb;
      padding: 20px;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f9fafc;
      padding: 10px 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      box-shadow: var(--card-shadow);
    }

    .btn {
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
    }

    .btn-primary { background: var(--primary-color); color: #fff; }
    .btn-info { background: var(--info-color); color: #fff; }
    .btn-danger { background: var(--danger-color); color: #fff; }

    .sync-status {
      font-size: 0.85rem;
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      margin-left: 5px;
    }

    .sync-status.synced {
      background-color: #d1edff;
      color: #0c5460;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
    }

    th, td {
      padding: 8px;
      border: 1px solid #eee;
    }

    th {
      background: #f5f6fa;
    }
  </style>
</head>

<body>

  <!-- Login Page -->
  <div id="login-page" class="login-container">
    <div class="login-box">
      <div id="login-form">
        <h2>Login</h2>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="login-email" placeholder="Enter your email">
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="login-password" placeholder="Enter your password">
        </div>
        <div class="form-group">
          <button type="button" onclick="login()">Login</button>
        </div>
        <div style="color:white;text-align:center;">No account? 
          <a style="color:#fff;text-decoration:underline;cursor:pointer"
             onclick="document.getElementById('login-form').classList.add('hidden');
                      document.getElementById('signup-form').classList.remove('hidden')">
             Sign Up
          </a>
        </div>
      </div>

      <div id="signup-form" class="hidden">
        <h2>Sign Up</h2>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="signup-email">
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="signup-password">
        </div>
        <div class="form-group">
          <label>Confirm Password</label>
          <input type="password" id="confirm-password">
        </div>
        <div class="form-group">
          <button type="button" onclick="signUp()">Sign Up</button>
        </div>
        <div style="color:white;text-align:center;">Have account? 
          <a style="color:#fff;text-decoration:underline;cursor:pointer"
             onclick="document.getElementById('signup-form').classList.add('hidden');
                      document.getElementById('login-form').classList.remove('hidden')">
             Login
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Application -->
  <div id="app-container" class="container" style="display:none;">
    <div class="sidebar">
      <h2>ðŸ“‹ PayrollPro</h2>
      <div class="sidebar-menu">
        <a href="#" class="menu-item active" onclick="showSection('employees')">ðŸ‘¥ Employees</a>
        <a href="#" class="menu-item" onclick="showSection('payroll')">ðŸ’° Payroll</a>
        <a href="#" class="menu-item" onclick="showSection('attendance')">ðŸ“… Attendance</a>
      </div>
    </div>

    <div class="main-content">
      <div id="employees" class="page-section active">
        <div class="header">
          <h1>ðŸ‘¥ Employee Management</h1>
          <div>
            <span id="logged-in-user-1"></span>
            <button type="button" class="btn btn-info" id="sync-employees-btn">ðŸ”„ Sync</button>
            <span id="sync-employees-status" class="sync-status synced">Synced</span>
            <button type="button" class="btn btn-danger" onclick="logout()">Logout</button>
          </div>
        </div>
        <div style="margin-bottom:10px;">
          <input type="text" id="employeeSearch" placeholder="Search employees.">
          <button type="button" class="btn btn-primary" id="addEmployeeBtn">+ Add Employee</button>
        </div>
        <div class="form-container" id="employeeForm" style="display:none;">
          <form id="employeeDataForm">
            <label>Name</label>
            <input type="text" id="empName" required>
            <label>Department</label>
            <select id="empDepartment">
              <option value="HR">HR</option>
              <option value="Finance">Finance</option>
              <option value="Operations">Operations</option>
            </select>
            <div style="margin-top:10px;">
              <button type="submit" id="saveEmployeeBtn_1" class="btn btn-primary">Save</button>
              <button type="button" id="cancelEmployeeBtn_1" class="btn btn-info">Cancel</button>
            </div>
          </form>
        </div>
        <table id="employeeTable">
          <thead>
            <tr>
              <th>Name</th><th>Department</th><th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="payroll" class="page-section" style="display:none;">
        <h2>Payroll</h2>
      </div>

      <div id="attendance" class="page-section" style="display:none;">
        <h2>Attendance</h2>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB2-yGvsn2Y9_0FBSIxnC50GTNo-3OeFew",
      authDomain: "testpayroll-60439.firebaseapp.com",
      projectId: "testpayroll-60439",
      storageBucket: "testpayroll-60439.firebasestorage.app",
      messagingSenderId: "240505247731",
      appId: "1:240505247731:web:6cb12d41ab9acff10ba486",
      measurementId: "G-40RDNWL84J"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    window.login = async function() {
      const email = document.getElementById("login-email").value;
      const password = document.getElementById("login-password").value;
      await signInWithEmailAndPassword(auth, email, password);
    };

    window.signUp = async function() {
      const email = document.getElementById("signup-email").value;
      const password = document.getElementById("signup-password").value;
      const confirm = document.getElementById("confirm-password").value;
      if (password !== confirm) return alert("Passwords do not match");
      await createUserWithEmailAndPassword(auth, email, password);
      alert("Account created, please login.");
      document.getElementById("signup-form").classList.add("hidden");
      document.getElementById("login-form").classList.remove("hidden");
    };

    window.logout = async function() {
      await signOut(auth);
    };

    onAuthStateChanged(auth, (user) => {
      const loginPage = document.getElementById("login-page");
      const appContainer = document.getElementById("app-container");
      if (user) {
        if (loginPage) loginPage.style.display = "none";
        if (appContainer) appContainer.style.display = "flex";
        document.getElementById("logged-in-user-1").textContent = user.email;
      } else {
        if (loginPage) loginPage.style.display = "flex";
        if (appContainer) appContainer.style.display = "none";
      }
    });
  </script>

  <script>
    function showSection(id) {
      document.querySelectorAll(".page-section").forEach(s => s.style.display = "none");
      document.getElementById(id).style.display = "block";
      document.querySelectorAll(".menu-item").forEach(a => a.classList.remove("active"));
      document.querySelector(`.menu-item[onclick="showSection('${id}')"]`)?.classList.add("active");
    }

    document.getElementById("addEmployeeBtn").addEventListener("click", () => {
      document.getElementById("employeeForm").style.display = "block";
    });

    document.getElementById("cancelEmployeeBtn_1").addEventListener("click", () => {
      document.getElementById("employeeForm").style.display = "none";
    });

    document.getElementById("employeeDataForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("empName").value;
      const dept = document.getElementById("empDepartment").value;
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${name}</td><td>${dept}</td><td><button class="btn btn-danger" onclick="this.closest('tr').remove()">Delete</button></td>`;
      document.querySelector("#employeeTable tbody").appendChild(tr);
      document.getElementById("employeeForm").style.display = "none";
      e.target.reset();
    });
  </script>

</body>
</html>
